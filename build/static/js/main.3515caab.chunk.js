(this["webpackJsonpmanage-emp"]=this["webpackJsonpmanage-emp"]||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(5),s=n.n(r),o=(n(12),n(1)),i=n(4),l=n.n(i),u=n(6),j=n(7),b="SET_LOADING",d="SET_STORIES",p="REMOVE_STORY",O="HANDLE_PAGE",h="HANDLE_SEARCH",f=function(e,t){switch(t.type){case b:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case d:var n=t.payload;return console.log(n),Object(o.a)(Object(o.a)({},e),{},{stories:n.hits,nbPages:n.nbPages,loading:!1});case O:if("inc"===t.payload){var a=e.page+1;return a>e.nbPages-1&&(a=0),Object(o.a)(Object(o.a)({},e),{},{page:a})}if("dec"===t.payload){var c=e.page-1;return c<0&&(c=e.nbPages-1),Object(o.a)(Object(o.a)({},e),{},{page:c})}case h:var r=t.payload;return Object(o.a)(Object(o.a)({},e),{},{valueOfInput:r,page:0});case p:return Object(o.a)(Object(o.a)({},e),{},{stories:e.stories.filter((function(e){return e.objectID!==t.payload}))});case"ERROR":throw new Error('no mathching "'.concat(t.payload,'" action type'));default:return e}},v=n(0),g=c.a.createContext(),m={loading:!0,stories:[],page:0,nbPages:0,valueOfInput:"react"},x=function(e){var t=e.children,n=Object(a.useReducer)(f,m),c=Object(j.a)(n,2),r=c[0],s=c[1],i=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:b}),e.prev=1,e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,s({type:d,payload:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),s({type:"ERRORR",payload:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){i("".concat("https://hn.algolia.com/api/v1/search?","query=").concat(r.valueOfInput,"&page=").concat(r.page))}),[r.valueOfInput,r.page]),Object(v.jsx)(g.Provider,{value:Object(o.a)(Object(o.a)({},r),{},{handlePage:function(e){s({type:O,payload:e})},handleSearch:function(e){s({type:h,payload:e})},handleRemove:function(e){console.log(e),s({type:p,payload:e})}}),children:t})},y=function(){return Object(a.useContext)(g)},E=function(){var e=y(),t=e.valueOfInput,n=e.handleSearch;return Object(v.jsxs)("form",{className:"search-form",onSubmit:function(e){return e.preventDefault()},children:[Object(v.jsx)("h2",{children:"search Hacker News"}),Object(v.jsx)("input",{type:"text",className:"form-input",value:t,onChange:function(e){n(e.target.value)}})]})},N=function(){var e=y(),t=e.loading,n=e.page,a=e.nbPages,c=e.handlePage;return Object(v.jsxs)("div",{className:"btn-container",children:[Object(v.jsx)("button",{disabled:t,onClick:function(){return c("dec")},children:"prev"}),Object(v.jsxs)("p",{children:[n+1," of ",a]}),Object(v.jsx)("button",{disabled:t,onClick:function(){c("inc")},children:"next"})]})},R=function(e){var t=e.stories,n=y().handleRemove;return Object(v.jsx)(v.Fragment,{children:t.map((function(e){var t=e.title,a=e.url,c=e.points,r=e.num_comments,s=e.author,o=e.objectID;return Object(v.jsxs)("article",{className:"story",children:[Object(v.jsx)("h4",{className:"title",children:t}),Object(v.jsxs)("p",{className:"info",children:[c," ",Object(v.jsxs)("span",{children:[s," | "]})," ",r]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("a",{href:a,className:"read-link",target:"_blank",rel:"noopener noreferrer",children:"read more"}),Object(v.jsx)("button",{className:"remove-btn",onClick:function(){return n(o)},children:"remove"})]})]},o)}))})};var k=function(){var e=y(),t=e.loading,n=e.stories;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(E,{}),Object(v.jsx)(N,{}),t||Object(v.jsx)("div",{className:"stories",children:Object(v.jsx)(R,{stories:n})}),t?Object(v.jsx)("div",{className:"loading"}):null]})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(x,{children:Object(v.jsx)(k,{})})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3515caab.chunk.js.map